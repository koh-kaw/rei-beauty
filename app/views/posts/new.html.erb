

<!DOCTYPE html>
<html lang="ja">
  <body style="padding-top: 72px;">
    <%= form_with model: @post, local: true do |f| %>
<!--TODO: このビジネスユーザーが承認されているカテゴリのみ表示する-->
    <section class="py-5">
      <div class="container">
          <div class="row form-block">
            <div class="col-lg-4">
              <h4>登録する施術カテゴリ</h4>
              <p class="text-muted text-sm">登録する施術カテゴリを右の一覧から選択してください。</p>
            </div>
            <div class="col-lg-7 ms-auto">
              <div class="mb-4">

                
                    <%= f.label :title, '施術カテゴリを選択', class: "form-label" %><br>
                    <%= f.collection_select(:category_id, Category.all, :id, :name, {prompt: "カテゴリ"}, {class: "text-muted form-select w-100"}) %>


              </div>
            </div>
          </div>
      </div>
    </section>


    <section class="py-5">
      <div class="container">

          <div class="row form-block">
            <div class="col-lg-4">
              <h4>施術情報</h4>
            </div>

            <div class="col-lg-7 ms-auto">
              <div class="mb-4">
                
                <div class="row">
                  <div class="col-md-6">
                    <div class="mb-4">
                      <%= f.label :title, 'メニュータイトル', class: "form-label" %>
                      <%= f.text_field :title, class:"form-control" %>
                    </div>
                  </div>
                </div>

                <div class="row">
                <div class="col-md-6">
                  <div class="mb-4 form-group">
                    <%= f.label :content, '施術内容', class: "form-label" %>
                    <%= f.text_area :content, class:"form-control", rows: "4" %>
                  </div>
                </div>
              </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="mb-4">
                      <%= f.label :price, '料金', class: "form-label" %>
                      <%= f.text_field :price, class:"form-control" %>
                    </div>
                  </div>
                </div>


                <div class="row">
                <div class="col-md-6">
                  <div class="mb-4">
                    <%= f.label :time, "施術時間", class: "form-label" %><br />
                    <%= f.time_field :time, class:"form-control", value: "%H:%M", min:"00:15:00", max:"08:00:00"  %>
                  </div>
                </div>
              </div>



            </div>
          </div>
      </div>
    </section>
    
    
    <section class="py-5">
      <div class="container">
        <div class="row form-block">
          <div class="col-lg-4">
            <h4>イメージ写真</h4>
            <p class="text-muted text-sm">メニューに掲載する画像があれば登録してください。</p>
          </div>

          <div class="col-lg-7 ms-auto">
            <div class="mb-4">         
                <%= f.file_field :image, id: :menu_img %>
                <div class="gallery mb-3 ml-n1 mr-n1">
                  <div class="col-lg-4 col-6 px-1 mb-2">
                <%= image_pack_tag "logo.png", id: :img_prev, class:"img-fluid dropzone" %>
                    <script type="text/javascript">
                    $(function() {
                      function readURL(input) {
                          if (input.files && input.files[0]) {
                          var reader = new FileReader();
                          reader.onload = function (e) {
                      $('#img_prev').attr('src', e.target.result);
                          }
                          reader.readAsDataURL(input.files[0]);
                          }
                      }
                      $("#menu_img").change(function(){
                          readURL(this);
                      });
                    });
                  </script>
                  </div>
                  </div>
            </div>
          </div>
        </div>

        <div class="row form-block flex-column flex-sm-row">
          <div class="col text-center text-sm-start"><a class="btn btn-link text-muted" href="/"> <i class="fa-chevron-left fa me-2"></i>トップへ戻る</a>
          </div>
          <div class="col text-center text-sm-end actions">

            <%= f.submit 'メニューを登録する', class:"btn btn-primary text-secondary" %>
            <% end %>
          </div>
        </div>
      </div>
    </section>

    <!-- JavaScript files-->
    <script>
      // ------------------------------------------------------- //
      //   Inject SVG Sprite - 
      //   see more here 
      //   https://css-tricks.com/ajaxing-svg-sprite/
      // ------------------------------------------------------ //
      function injectSvgSprite(path) {
      
          var ajax = new XMLHttpRequest();
          ajax.open("GET", path, true);
          ajax.send();
          ajax.onload = function(e) {
          var div = document.createElement("div");
          div.className = 'd-none';
          div.innerHTML = ajax.responseText;
          document.body.insertBefore(div, document.body.childNodes[0]);
          }
      }    
      // to avoid CORS issues when viewing using file:// protocol, using the demo URL for the SVG sprite
      // use your own URL in production, please :)
      // https://demo.bootstrapious.com/directory/1-0/icons/orion-svg-sprite.svg
      //- injectSvgSprite('${path}icons/orion-svg-sprite.svg'); 
      injectSvgSprite('https://demo.bootstrapious.com/directory/1-4/icons/orion-svg-sprite.svg'); 
      
    </script>
    <!-- Swiper Carousel                       -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/js/swiper.min.js"></script>
    <script>var basePath = ''</script>
    <script type="text/javascript" src="//jpostal-1006.appspot.com/jquery.jpostal.js"></script>
  </body>
</html>
